# å¯¼å…¥streamlitåº“ï¼Œè¿™æ˜¯åˆ¶ä½œç½‘é¡µåº”ç”¨çš„æ ¸å¿ƒåº“ï¼Œå¯¼å…¥åç”¨stä½œä¸ºç®€å†™
import streamlit as st

# è®¾ç½®ç½‘é¡µçš„åŸºç¡€é…ç½®ï¼špage_titleæ˜¯æµè§ˆå™¨æ ‡ç­¾é¡µæ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œpage_iconæ˜¯æ ‡ç­¾é¡µçš„å°å›¾æ ‡
st.set_page_config(page_title="ç›¸å†Œ", page_icon="ğŸ±")

# åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºä¸€çº§æ ‡é¢˜ï¼Œå†…å®¹ä¸ºâ€œæˆ‘çš„ç›¸å†Œâ€ï¼Œæ˜¯é¡µé¢çš„ä¸»æ ‡é¢˜
st.title("æˆ‘çš„ç›¸å†Œ")

# åˆå§‹åŒ–å›¾ç‰‡ç´¢å¼•ï¼šstreamlitçš„session_stateç”¨äºä¿å­˜é¡µé¢çŠ¶æ€ï¼ˆæ¯”å¦‚åˆ‡æ¢é¡µé¢/ç‚¹å‡»æŒ‰é’®åä¸é‡ç½®ï¼‰
# æ£€æŸ¥session_stateä¸­æ˜¯å¦æœ‰'ind'è¿™ä¸ªå˜é‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æŠŠå®ƒåˆå§‹åŒ–ä¸º0ï¼ˆé»˜è®¤æ˜¾ç¤ºç¬¬1å¼ å›¾ç‰‡ï¼‰
if 'ind' not in st.session_state:
    st.session_state['ind'] = 0

# å®šä¹‰å›¾ç‰‡åˆ—è¡¨ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å­—å…¸çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸å­˜ä¸€å¼ å›¾ç‰‡çš„ä¿¡æ¯
# æ¯ä¸ªå­—å…¸é‡Œæœ‰ä¸¤ä¸ªé”®ï¼šurlæ˜¯å›¾ç‰‡çš„ç½‘ç»œé“¾æ¥ï¼Œtextæ˜¯å›¾ç‰‡çš„è¯´æ˜æ–‡å­—
images = [
    {
        'url': "https://static.streamlit.io/examples/cat.jpg",  # çŒ«å’ªå›¾ç‰‡çš„å®˜æ–¹æµ‹è¯•é“¾æ¥ï¼ˆä¿è¯èƒ½åŠ è½½ï¼‰
        'text': "å¯çˆ±çš„çŒ«å’ª"  # è¿™å¼ å›¾ç‰‡çš„è¯´æ˜æ–‡å­—ï¼ˆå›¾ç‰‡ä¸‹æ–¹çš„æ³¨é‡Šï¼‰
    },
    {
        'url': "https://static.streamlit.io/examples/dog.jpg",  # ç‹—ç‹—å›¾ç‰‡çš„å®˜æ–¹æµ‹è¯•é“¾æ¥
        'text': "ç‹—ç‹—"  # ç‹—ç‹—å›¾ç‰‡çš„è¯´æ˜æ–‡å­—
    },
    {
        'url': "https://static.streamlit.io/examples/owl.jpg",  # çŒ«å¤´é¹°å›¾ç‰‡çš„å®˜æ–¹æµ‹è¯•é“¾æ¥
        'text': "çŒ«å¤´é¹°"  # çŒ«å¤´é¹°å›¾ç‰‡çš„è¯´æ˜æ–‡å­—
    }
]

# æ˜¾ç¤ºå½“å‰ç´¢å¼•å¯¹åº”çš„å›¾ç‰‡ï¼š
# images[st.session_state['ind']]['url'] å–å½“å‰ç´¢å¼•å›¾ç‰‡çš„é“¾æ¥
# captionå‚æ•°æ˜¯å›¾ç‰‡ä¸‹æ–¹æ˜¾ç¤ºçš„è¯´æ˜æ–‡å­—ï¼Œå¯¹åº”åˆ—è¡¨é‡Œçš„textå€¼
st.image(images[st.session_state['ind']]['url'], caption=images[st.session_state['ind']]['text'])

# å®šä¹‰â€œä¸Šä¸€å¼ â€å›¾ç‰‡çš„å‡½æ•°ï¼šç‚¹å‡»â€œä¸Šä¸€å¼ â€æŒ‰é’®æ—¶æ‰§è¡Œè¿™ä¸ªå‡½æ•°
def prev_img():
    # è®¡ç®—æ–°çš„ç´¢å¼•ï¼šå½“å‰ç´¢å¼•-1ï¼Œç”¨% len(images)å®ç°å¾ªç¯ï¼ˆæ¯”å¦‚ç´¢å¼•0å‡1åå›åˆ°æœ€åä¸€å¼ ï¼‰
    # len(images)æ˜¯å›¾ç‰‡æ€»æ•°ï¼Œå–ä½™è¿ç®—ä¿è¯ç´¢å¼•ä¸ä¼šè¶…å‡ºåˆ—è¡¨èŒƒå›´
    st.session_state['ind'] = (st.session_state['ind'] - 1) % len(images)

# å®šä¹‰â€œä¸‹ä¸€å¼ â€å›¾ç‰‡çš„å‡½æ•°ï¼šç‚¹å‡»â€œä¸‹ä¸€å¼ â€æŒ‰é’®æ—¶æ‰§è¡Œè¿™ä¸ªå‡½æ•°
def next_img():
    # è®¡ç®—æ–°çš„ç´¢å¼•ï¼šå½“å‰ç´¢å¼•+1ï¼Œå–ä½™è¿ç®—å®ç°å¾ªç¯ï¼ˆæ¯”å¦‚æœ€åä¸€å¼ ç´¢å¼•+1åå›åˆ°0ï¼‰
    st.session_state['ind'] = (st.session_state['ind'] + 1) % len(images)

# åˆ›å»ºåˆ†æ ï¼šæŠŠé¡µé¢åˆ†æˆ2ä¸ªç­‰å®½çš„åˆ—ï¼Œåˆ†åˆ«èµ‹å€¼ç»™c1å’Œc2ï¼ˆç”¨äºæ”¾â€œä¸Šä¸€å¼ â€å’Œâ€œä¸‹ä¸€å¼ â€æŒ‰é’®ï¼‰
c1, c2 = st.columns(2)

# ä½¿ç”¨ç¬¬ä¸€ä¸ªåˆ†æ c1ï¼šæŠŠâ€œä¸Šä¸€å¼ â€æŒ‰é’®æ”¾åœ¨è¿™ä¸ªåˆ—é‡Œ
with c1:
    # åˆ›å»ºâ€œä¸Šä¸€å¼ â€æŒ‰é’®ï¼š
    # labelæ˜¯æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼Œon_clickæ˜¯ç‚¹å‡»æŒ‰é’®åæ‰§è¡Œçš„å‡½æ•°ï¼ˆprev_imgï¼‰
    # use_container_width=Trueè®©æŒ‰é’®å æ»¡æ‰€åœ¨åˆ—çš„å®½åº¦ï¼ˆæ›´ç¾è§‚ï¼‰
    st.button("ä¸Šä¸€å¼ ", on_click=prev_img, use_container_width=True)

# ä½¿ç”¨ç¬¬äºŒä¸ªåˆ†æ c2ï¼šæŠŠâ€œä¸‹ä¸€å¼ â€æŒ‰é’®æ”¾åœ¨è¿™ä¸ªåˆ—é‡Œ
with c2:
    # åˆ›å»ºâ€œä¸‹ä¸€å¼ â€æŒ‰é’®ï¼šé€»è¾‘å’Œâ€œä¸Šä¸€å¼ â€ä¸€è‡´ï¼Œåªæ˜¯ç»‘å®šçš„å‡½æ•°æ˜¯next_img
    st.button("ä¸‹ä¸€å¼ ", on_click=next_img, use_container_width=True)